<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.netlearning.fss.mapper.AccessTokenMapper">

    <resultMap id="accessTokenResultMap" type="com.netlearning.framework.domain.fss.response.AccessTokenResult">
        <result column="file_access_token"                     property="fileAccessToken"                   jdbcType="VARCHAR" />
        <result column="unique_id"                             property="uniqueId"                   jdbcType="VARCHAR" />
        <result column="type"                                  property="type"                   jdbcType="VARCHAR" />
    </resultMap>

    <sql id="accessTokenParam">
      `file_access_token`,
      `unique_id`,
      `type`
    </sql>
    <select id="query" parameterType="com.netlearning.framework.domain.fss.AccessToken" resultMap="accessTokenResultMap">
        SELECT
          <include refid="accessTokenParam"></include>
        FROM
          `fss_access_token`
        <where>
            <if test="fileAccessToken != null and fileAccessToken != ''">
                AND `file_access_token` = #{fileAccessToken,jdbcType=VARCHAR}
            </if>
            <if test="uniqueId != null and uniqueId != ''">
                AND `unique_id` = #{uniqueId,jdbcType=VARCHAR}
            </if>
            <if test="type != null and type != ''">
                AND `type` = #{type,jdbcType=VARCHAR}
            </if>
        </where>
    </select>

    <select id="get" parameterType="com.netlearning.framework.domain.fss.AccessToken" resultMap="accessTokenResultMap">
        SELECT
        <include refid="accessTokenParam"></include>
        FROM
        `fss_access_token`
        <where>
            <if test="fileAccessToken != null and fileAccessToken != ''">
                AND `file_access_token` = #{fileAccessToken,jdbcType=VARCHAR}
            </if>
            <if test="uniqueId != null and uniqueId != ''">
                AND `unique_id` = #{uniqueId,jdbcType=VARCHAR}
            </if>
            <if test="type != null and type != ''">
                AND `type` = #{type,jdbcType=VARCHAR}
            </if>
        </where>
    </select>

    <update id="update">
        UPDATE
          `fss_access_token`
        SET
        <trim suffixOverrides=",">
            <if test="fileAccessToken != null and fileAccessToken != ''">
                `file_access_token` = #{fileAccessToken,jdbcType=VARCHAR},
            </if>
            <if test="uniqueId != null and uniqueId != ''">
                `unique_id` = #{uniqueId,jdbcType=VARCHAR},
            </if>
            <if test="type != null and type != ''">
                `type` = #{type,jdbcType=VARCHAR},
            </if>
        </trim>
        WHERE `file_access_token` = #{fileAccessToken,jdbcType=VARCHAR};
    </update>

    <insert id="insert">
        INSERT INTO `fss_access_token`
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="fileAccessToken != null and fileAccessToken != ''">
                `file_access_token`,
            </if>
            <if test="uniqueId != null and uniqueId != ''">
                `unique_id`,
            </if>
            <if test="type != null and type != ''">
                `type`,
            </if>
        </trim>
        <trim prefix="VALUES(" suffix=")" suffixOverrides=",">
            <if test="fileAccessToken != null and fileAccessToken != ''">
                #{fileAccessToken,jdbcType=VARCHAR},
            </if>
            <if test="uniqueId != null and uniqueId != ''">
                #{uniqueId,jdbcType=VARCHAR},
            </if>
            <if test="type != null and type != ''">
                #{type,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>

    <delete id="delete">
    DELETE
    FROM
      `fss_access_token`
    WHERE `file_access_token` = #{fileAccessToken,jdbcType=VARCHAR};
    </delete>
</mapper>
